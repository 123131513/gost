log:
  output: stderr # stderr, stdout, /path/to/file
  level: debug # debug, info, warn, error, fatal
  format: json # text, json

profiling:
  addr: ":6060"
  enabled: true

services:
- name: socks5
  addr: ":21080"
  handler:
    type: socks5
    metadata:
      readTimeout: 5s
      retry: 3
      udp: true
      bufferSize: 4096
  listener:
    type: tcp
    metadata:
      keepAlive: 15s
- name: ss
  addr: ":28338"
  handler:
    type: ss
    metadata:
      method: chacha20-ietf
      password: gost
      readTimeout: 5s
      retry: 3
      udp: true
      bufferSize: 4096
  listener:
    type: udp
    metadata:
      keepAlive: 15s
- name: relay-proxy
  addr: ":28080"
  chain: chain-socks5
  handler:
    type: relay
    metadata:
      readTimeout: 5s
  listener:
    type: tcp
    metadata:
      keepAlive: 15s

chains:
- name: chain-socks5
  hops:
  - name: hop01
    nodes:
    - name: node01
      addr: ":21080"
      connector:
        type: socks5
        metadata: 
          readTimeout: 5s
          bufferSize: 4096
          notls: true
      dialer:
        type: tcp
        metadata: {}

- name: chain-ss
  hops:
  - name: hop01
    nodes:
    - name: node01
      addr: ":28338"
      connector:
        type: ss
        metadata: 
          method: chacha20-ietf
          password: gost
          readTimeout: 5s
          nodelay: true
          udp: true
          bufferSize: 4096
      dialer:
        type: udp
        metadata: {}

bypasses:
- name: bypass01
  reverse: false
  matchers:
  - .baidu.com
  - "*.example.com"       # domain wildcard
  - .example.org        # will match example.org and *.example.org

  # From IANA IPv4 Special-Purpose Address Registry
  # http://www.iana.org/assignments/iana-ipv4-special-registry/iana-ipv4-special-registry.xhtml
  - 0.0.0.0/8           # RFC1122: "This host on this network"
  - 10.0.0.0/8          # RFC1918: Private-Use
  - 100.64.0.0/10       # RFC6598: Shared Address Space
  - 127.0.0.0/8         # RFC1122: Loopback
  - 169.254.0.0/16      # RFC3927: Link Local
  - 172.16.0.0/12       # RFC1918: Private-Use
  - 192.0.0.0/24        # RFC6890: IETF Protocol Assignments
  - 192.0.2.0/24        # RFC5737: Documentation (TEST-NET-1)
  - 192.88.99.0/24      # RFC3068: 6to4 Relay Anycast
  - 192.168.0.0/16      # RFC1918: Private-Use
  - 198.18.0.0/15       # RFC2544: Benchmarking
  - 198.51.100.0/24     # RFC5737: Documentation (TEST-NET-2)
  - 203.0.113.0/24      # RFC5737: Documentation (TEST-NET-3)
  - 240.0.0.0/4         # RFC1112: Reserved
  - 255.255.255.255/32  # RFC0919: Limited Broadcast

  # From IANA Multicast Address Space Registry
  # http://www.iana.org/assignments/multicast-addresses/multicast-addresses.xhtml
  - 224.0.0.0/4         # RFC5771: Multicast/Reserved